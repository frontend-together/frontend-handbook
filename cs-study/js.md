## 🌐 브라우저 렌더링 과정

### 1. **리소스 요청 및 HTML 파싱**
1. **URI 입력 및 서버 요청**
   - 사용자가 주소창에 URL을 입력하거나 링크를 클릭하면 브라우저는 **DNS**를 통해 해당 URI의 IP 주소를 가져옵니다.
   - 브라우저는 IP 주소를 통해 **GET 요청**을 서버로 보내고, 서버는 HTML 파일을 응답합니다.

2. **HTML 데이터를 바이트 → 문자열로 변환**
   - 브라우저는 서버로부터 응답받은 HTML 데이터를 바이트(2진수)로 수신.
   - **Charset** 정보(`meta charset`)에 따라 문자열로 변환합니다.

3. **HTML 파싱 및 DOM 트리 생성**
   - HTML을 **토큰(token)** 단위로 분해하여 **노드(node)**를 생성.
   - HTML 요소 간의 부모-자식 관계를 트리 구조로 표현하여 **DOM(Document Object Model)** 트리를 생성합니다.

---

### 2. **CSS 파싱 및 CSSOM 생성**
- 브라우저는 HTML에서 `<style>` 태그와 CSS 파일을 파싱하여 **CSSOM(CSS Object Model)**을 생성.
- CSSOM은 스타일의 계층적 구조를 나타내며, DOM 트리와 결합하여 렌더 트리를 형성합니다.

---

### 3. **렌더 트리 생성**
- DOM 트리와 CSSOM을 결합하여 **렌더 트리(Render Tree)**를 생성.
- 렌더 트리는 화면에 표시될 요소와 스타일만 포함합니다:
  - 예: `display: none`은 렌더 트리에 포함되지 않음.

---

### 4. **레이아웃 계산 (Reflow)**
- 렌더 트리의 각 노드에 대해 화면에서의 **위치와 크기**를 계산.
- 뷰포트 크기를 기준으로 배치를 결정합니다.

---

### 5. **페인팅(Painting)**
- 계산된 레이아웃 정보를 기반으로 픽셀을 화면에 그립니다.
- 요소의 배경색, 텍스트, 테두리 등 시각적 속성이 렌더링됩니다.

---

### 6. **합성(Compositing)**
- GPU를 사용해 여러 레이어를 결합하여 최종 화면을 생성.

---

## 🖥️ 브라우저 렌더링과 자바스크립트

### 1. **JavaScript 파싱과 DOM 생성의 상호작용**
- 브라우저는 HTML을 파싱하다가 `<script>` 태그를 만나면 **DOM 생성을 중단**합니다.
- `<script>` 태그에 정의된 JavaScript 파일을 요청하고, 해당 파일을 다운로드 및 실행.
- JavaScript 실행이 완료되면 **HTML 파싱을 재개**합니다.

---

### 2. **Script 태그 속성**
- **`<script>` 기본 동작**:
  - DOM 파싱 중단 → JavaScript 파일 다운로드 → 실행 후 파싱 재개.
- **`async` 속성**:
  - JavaScript 파일을 **병렬로 다운로드**하고, 다운로드 완료 후 **즉시 실행**.
  - HTML 파싱과 병행 가능.
- **`defer` 속성**:
  - HTML 파싱이 끝난 후 **JavaScript 파일 다운로드 및 실행**.
  - JavaScript 실행 순서를 보장.

---

### 3. **비동기 로드와 성능 최적화**
- `<script defer>`: HTML 파싱이 끝난 후 실행하므로 렌더링 차단 방지.
- `<script async>`: 빠른 로드를 위해 병렬로 처리하지만 실행 순서는 보장되지 않음.

---

## 🔄 Reflow와 Repaint

### 1. **Reflow (레이아웃 재계산)**
- DOM이나 CSSOM의 변경으로 인해 렌더 트리를 다시 계산.
- **비용이 높은 작업**으로, 페이지 구조와 레이아웃이 크게 변경될 때 발생.

### 2. **Repaint (재페인팅)**
- 요소의 **시각적 속성** 변경으로 인해 다시 그리는 과정.
- 예: 색상, 그림자, 텍스트 스타일 변경.
- Reflow보다 비용이 적지만 빈번하면 성능 저하 발생.

---

## 🌟 최적화 방법

1. **CSSOM 변경 최소화**
   - DOM 조작 대신 `classList` 활용.
   - DOM 요소의 스타일 변경은 한 번에 처리.

2. **JavaScript 로드 최적화**
   - `<script defer>` 또는 `<script async>` 사용.
   - JavaScript는 렌더링 차단을 최소화하도록 설계.

3. **Reflow/Repaint 방지**
   - 애니메이션에 GPU 가속이 가능한 속성(`transform`, `opacity`) 활용.
   - `visibility: hidden`은 Repaint만 유발하지만, `display: none`은 Reflow까지 유발.

4. **웹 폰트 로딩 최적화**
   - `font-display` 속성을 활용하여 FOUT/FOIT 방지.
   - 웹 폰트를 **preloading**.

---

## 📚 단어 정리

### DOM vs 렌더 트리
- **DOM 트리**:
  - HTML 문서의 모든 요소를 포함.
- **렌더 트리**:
  - DOM과 CSSOM을 결합해 화면에 표시될 요소와 스타일만 포함.

---

## 📝 면접 대비 질문

1. 브라우저 렌더링 과정의 주요 단계를 설명해주세요.
2. `<script async>`와 `<script defer>`의 차이점을 설명해주세요.
3. Reflow와 Repaint의 차이를 설명하고, 이를 최소화하기 위한 방법은 무엇인가요?
4. 웹 폰트를 로드할 때 발생하는 문제와 해결 방법은 무엇인가요?

---
